if(!window.AWSC){AWSC={}}AWSC.PanoramaTrackerInit=(function(){var a=function(){var Q="awsc-panorama";try{window.localStorage.setItem(Q,Q);window.localStorage.removeItem(Q);return true}catch(R){return false}};var B="/panoramaroute/allowlist",v="global.prod.pw.analytics.console.aws.a2z.com",d=".prod.pr.analytics.console.aws.a2z.com",y="us-east-1",E=1,M="web",z=/alpha|beta|gamma|integ|preprod|pre-prod/i,t="panorama",c="aws.amazon.com",P="1",o="console.aws.amazon.com",H="0",g=v+B,x=o+B,s="awsc_panorama_lastChecked_",O="awsc_panorama_preference_",I=1000,J=undefined,j=20000,C=undefined,F="",G=1000*60*5,q=undefined,r=a(),m=function(){return undefined},D=0,b=0;if(window.AWSC&&window.AWSC.Clog&&window.AWSC.Clog.log){m=window.AWSC.Clog.log}var h=(function p(){var e=window.location.hostname,Q;switch(true){case z.test(e):Q="NonProd";break;case e.indexOf(c)!==-1:Q="Prod";break;default:Q="NonProd";break}return Q})();if(h==="NonProd"&&window.disablePanorama){return}var l=function(R){try{var Q=document.createEvent("CustomEvent");Q.initCustomEvent("onPanoramaLoad",true,true,{enabled:R});window.dispatchEvent(Q);if(!R){window.panorama=function(){console.warn("Panorama is not enabled; events will not be emitted.");return undefined};window.panorama.enabled=false;window.AWSC.Clog.bufferedQueue=[]}}catch(S){m("dispatchPanoramaLoadError",1)}};var A=function(W,S,X,V,U){if(r){try{q=JSON.parse(window.localStorage.getItem(s+W))}catch(T){q=null}if(q&&Date.now()-q<G){l(false);return}else{if(q&&Date.now()-q>G){window.localStorage.removeItem(s+W);window.localStorage.removeItem(O+W)}}}var Q="https://"+U+"?modality="+X+"&identifier="+S+"&region="+W;var Y=Boolean(window.location.href.indexOf("panoramaEnabled")!==-1);var Z=new XMLHttpRequest();Z.open("GET",Q,true);Z.onreadystatechange=function(){if(Z.readyState===4&&Z.status===200){m("panoALSuccessful",1);m({key:"panoALSuccessLatency",value:Date.now()-R,unit:"ms"});var aa=JSON.parse(Z.response);if(aa.isPanoramaAllowed){m("panoALTrue",1)}if(aa.isPanoramaAllowed||Y){var ab={};if(aa.trackerConfig){try{ab=JSON.parse(aa.trackerConfig)}catch(ac){m({key:"panoALParseError",value:1})}}if(ab.trackerUrl&&(ab.trackerUrlRatio||1)>Math.random()){V=ab.trackerUrl}if(ab.disablePhantom&&!!window.callPhantom){return}w(X,W,window,document,"script",V,t,null,null,ab)}else{l(false);m("panoALFalse",1)}}else{if(Z.readyState===4&&(Z.status>=400||Z.status===0)){m({key:"panoALFailureLatency",value:Date.now()-R,unit:"ms"});if(D<E){D++;if(D===1){m({key:"anyPanoALFail",value:1,detail:Z.status})}Z.abort();J=W+"."+x;setTimeout(function(){A(W,S,X,i,J)},I)}else{window.AWSC.Clog.bufferedQueue=[];m("panoZeroRetriesLeft",1);if(r){window.localStorage.setItem(s+W,Date.now())}l(false)}}}if(Z.readyState===4&&(Z.status===200||D>=E)){m({key:"totalPanoALRetries",value:D});if(r){if(J===g){window.localStorage.setItem(O+W,"0;"+Date.now())}else{if(J===W+"."+x){window.localStorage.setItem(O+W,"1;"+Date.now())}}}}};Z.ontimeout=function(){b++;m("panoALTimeoutExceeded",b)};Z.timeout=j;var R=Date.now();Z.send();if(D===0){m("anyPanoALSent",1)}return false};var w=function(U,e,Q,V,R,Z,X,T,Y,W){if(!Q[X]){Q.GlobalSnowplowNamespace=Q.GlobalSnowplowNamespace||[];Q.GlobalSnowplowNamespace.push(X);Q[X]=function(){(Q[X].q=Q[X].q||[]).push(arguments)};Q[X].loadTime=Date.now();Q[X].enabled=true;Q[X].q=Q[X].q||[];Q[X].trackCustomEvent=function(){[].unshift.call(arguments,"trackCustomEvent");Q[X].apply(this,arguments)};T=V.createElement(R);Y=V.getElementsByTagName(R)[0];T.onload=function(){l(true)};T.onerror=function(){l(false)};T.async=1;T.src=Z;Y.parentNode.insertBefore(T,Y)}var S={appId:"aws-console",console:true,trackerConstants:{whitelist:false,cookieDomain:"amazon.com",pluginsEnabledByDefault:true,modality:U}};for(var aa in W){if(W.hasOwnProperty(aa)&&!S[aa]){S[aa]=W[aa]}}if(J===e+"."+x){F=""}else{F="//"+e+d}window.panorama("newTracker","cf",F,S)};m("panoInitLoad",1);if(AWSC.NavFAC){AWSC.NavFAC.loadFeatures();if(AWSC.NavFAC.isFeatureEnabled(t)&&ConsoleNavService&&ConsoleNavService.Model){var N=ConsoleNavService.Model.currentRegionId||y,f=ConsoleNavService.Model.currentService.id,K=M,i=document.getElementById("awsc-panorama-bundle").getAttribute("data-url");try{var k=window.localStorage.getItem(O+N);var u=k.split(";");C=u[0];var n=parseInt(u[1],10);if(n&&Date.now()-n<G*3){if(C===P){F="";J=N+"."+x}else{F="//"+N+d;J=g}}else{if(n&&Date.now()-n>G*3){localStorage.removeItem(O+N);C=H;J=g}}}catch(L){C=undefined;J=g}A(N,f,K,i,J)}else{l(false)}}else{m("panoFacUnavailable",1);l(false)}})();